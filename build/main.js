(()=>{var h=Object.defineProperty,K=Object.defineProperties,X=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var N=(t,e,o)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,O=(t,e)=>{for(var o in e||(e={}))T.call(e,o)&&N(t,o,e[o]);if(I)for(var o of I(e))q.call(e,o)&&N(t,o,e[o]);return t},U=(t,e)=>K(t,j(e)),J=t=>h(t,"__esModule",{value:!0});var g=(t,e)=>()=>(t&&(e=t(t=0)),e);var Q=(t,e)=>{for(var o in e)h(t,o,{get:e[o],enumerable:!0})},Y=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Z(e))!T.call(t,r)&&(o||r!=="default")&&h(t,r,{get:()=>e[r],enumerable:!(n=X(e,r))||n.enumerable});return t};var tt=(t=>(e,o)=>t&&t.get(e)||(o=Y(J({}),e,1),t&&t.set(e,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);function C(t,e){let o=`${z}`;return z+=1,m[o]={handler:e,name:t},function(){delete m[o]}}function y(t,e){let o=!1;return C(t,function(...n){o!==!0&&(o=!0,e(...n))})}function P(t,e){for(let o in m)m[o].name===t&&m[o].handler.apply(null,e)}var m,z,L=g(()=>{m={},z=0;typeof window=="undefined"?figma.ui.onmessage=function([t,...e]){P(t,e)}:window.onmessage=function(t){let[e,...o]=t.data.pluginMessage;P(e,o)}});function x(t,e){if(typeof __html__=="undefined")throw new Error("No UI defined");let o=`<div id="create-figma-plugin"></div><script>document.body.classList.add('theme-${figma.editorType}');const __FIGMA_COMMAND__='${typeof figma.command=="undefined"?"":figma.command}';const __SHOW_UI_DATA__=${JSON.stringify(typeof e=="undefined"?{}:e)};${__html__}<\/script>`;figma.showUI(o,t)}var E=g(()=>{});var F=g(()=>{L();E()});var et,Ut,zt,Ct,Pt,Lt,ot,Et,Ft,_t,kt,Dt,Mt,Rt,Wt,rt,_,k=g(()=>{({widget:et}=figma),{AutoLayout:Ut,Frame:zt,Text:Ct,Rectangle:Pt,Image:Lt,SVG:ot,Ellipse:Et,useSyncedState:Ft,useSyncedMap:_t,usePropertyMenu:kt,useEffect:Dt,useWidgetId:Mt,register:Rt,waitForTask:Wt}=et,rt=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.5255 6.96593C13.6631 6.43247 14.1912 6.11588 14.7049 6.25882L20.286 7.81174C20.7997 7.95468 21.1046 8.50302 20.9669 9.03648L18.4745 18.6957C18.3369 19.2292 17.8088 19.5458 17.2951 19.4028L11.714 17.8499C11.2003 17.707 10.8954 17.1587 11.0331 16.6252L13.5255 6.96593Z" fill="#4E5BA6"/>
<path d="M8 6C8 5.44772 8.44772 5 9 5H15C15.5523 5 16 5.44772 16 6V16C16 16.5523 15.5523 17 15 17H9C8.44772 17 8 16.5523 8 16V6Z" fill="#C8CCE5"/>
<path d="M3.03432 8.81198C2.89138 8.27852 3.20796 7.73018 3.74143 7.58724L9.53698 6.03432C10.0704 5.89138 10.6188 6.20796 10.7617 6.74143L13.3499 16.4007C13.4929 16.9342 13.1763 17.4825 12.6428 17.6254L6.84726 19.1783C6.31379 19.3213 5.76545 19.0047 5.62251 18.4712L3.03432 8.81198Z" fill="#EAECF5"/>
</svg>`,_=()=>figma.widget.h(ot,{src:rt})});function v(t){return isNaN(Number(t))?t:`${t} ${t=="1"?"Point":"Points"}`}var A=g(()=>{});function M({votingOptions:t,storyName:e,storyDescription:o,votings:n}){return figma.widget.h(p,{direction:"vertical",width:"fill-parent"},figma.widget.h(u,{fontSize:14,fontWeight:500,fill:"#101828"},e),figma.widget.h(a,{size:4}),figma.widget.h(u,{fontSize:12,fontWeight:400,fill:"#101828"},o),figma.widget.h(a,{size:40}),figma.widget.h(p,{direction:"vertical",width:"fill-parent",spacing:8},figma.widget.h(at,{votings:n,votingOptions:t})),figma.widget.h(a,{size:40}),figma.widget.h(st,{votings:n,votingOptions:t}))}function st({votingOptions:t,votings:e}){let o=e.length,n=(()=>{switch(t.kind){case"numeric":return"\xF8 "+(Array.from(e.groupBy(r=>r.votedFor).values()).map(r=>Number(r[0].votedFor)*r.length).reduce((r,s)=>r+s,0)/o).toFixed(1)+" Points";case"categorical":return}})();return figma.widget.h(p,{direction:"horizontal",horizontalAlignItems:"center",width:"fill-parent",cornerRadius:8},figma.widget.h(p,{direction:"horizontal",verticalAlignItems:"center",width:"hug-contents",height:34,fill:"#ECFDF3",cornerRadius:8,padding:{vertical:8,horizontal:16}},figma.widget.h(u,{fontSize:12,fontWeight:400,fill:"#054F31"},`${o} ${o==1?"Vote":"Votes"}`),n?figma.widget.h(p,{direction:"horizontal",verticalAlignItems:"center",width:"hug-contents"},figma.widget.h(a,{size:10}),figma.widget.h(S,{height:18,width:1,fill:"#D1FADF"}),figma.widget.h(a,{size:10}),figma.widget.h(u,{fontSize:12,fontWeight:400,fill:"#054F31"},n)):void 0))}function at({votingOptions:t,votings:e}){let o=Array.from(e.groupBy(r=>r.votedFor,new Map(t.options.map(r=>[r,[]]))).entries()).filter(([r,s])=>s.length>0),n=e.length;return o.map(([r,s])=>figma.widget.h(p,{key:`${r}`,direction:"vertical",verticalAlignItems:"center",width:288,height:"hug-contents",spacing:8},figma.widget.h(p,{verticalAlignItems:"end",spacing:0,width:"fill-parent"},figma.widget.h(u,{fontSize:14,fontWeight:600,fill:"#101828"},v(r)),figma.widget.h(S,{height:1,width:"fill-parent"}),lt(s)),figma.widget.h(ct,{votes:s.length,totalVotes:n,length:288}),figma.widget.h(u,{fontSize:12,fontWeight:400,fill:"#101828",width:"fill-parent",horizontalAlignText:"right"},s.length," ",s.length==1?"Vote":"Votes")))}function lt(t){let e=[];for(let o=0;o<t.length;o+=R)e.push(t.slice(o,o+R));return figma.widget.h(p,{direction:"vertical",spacing:8},e.map((o,n)=>figma.widget.h(p,{key:`row_${n}`,direction:"horizontal",horizontalAlignItems:"end",spacing:8,width:"fill-parent"},o.map(r=>figma.widget.h(V,{key:`avatar_${r}`,photoUrl:r.userPhotoUrl,opacity:1})))))}function a({size:t}){return figma.widget.h(S,{width:t,height:t})}function V({photoUrl:t,opacity:e,key:o}){return figma.widget.h(it,{key:o,width:24,height:24,src:t,cornerRadius:24,opacity:e})}function w({text:t,onClick:e}){return figma.widget.h(p,{width:"fill-parent",height:44,cornerRadius:8,fill:"#C8CCE5",onClick:()=>new Promise(e)},figma.widget.h(u,{verticalAlignText:"center",horizontalAlignText:"center",width:"fill-parent",lineHeight:44,fontSize:14,fontWeight:600,fill:"#000E52"},t))}var nt,p,S,u,D,it,Xt,jt,Zt,qt,Jt,Qt,Yt,te,ee,ct,R,W=g(()=>{A();Array.prototype.groupBy=function(t,e){let o=e!=null?e:new Map;return this.reduce((n,r)=>{var i;let s=t(r);return n.set(s,((i=n.get(s))!=null?i:[]).concat([r]))},o)};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};({widget:nt}=figma),{AutoLayout:p,Frame:S,Text:u,Rectangle:D,Image:it,SVG:Xt,Ellipse:jt,useSyncedState:Zt,useSyncedMap:qt,usePropertyMenu:Jt,useEffect:Qt,useWidgetId:Yt,register:te,waitForTask:ee}=nt;ct=({votes:t,totalVotes:e,length:o})=>figma.widget.h(S,{width:o,height:8,cornerRadius:8},figma.widget.h(D,{width:o,height:8,fill:"#F9FAFB"}),e>0?figma.widget.h(D,{width:t/e*o,height:8,cornerRadius:8,fill:"#717BBC"}):null),R=6});var G={};Q(G,{default:()=>ft});function ft(){b.register(ht)}function ht(){let[t,e]=pt("votingState",B),o=gt("userVote");dt(()=>{t.votingState=="Revealed"&&figma.closePlugin()});let n={itemType:"action",tooltip:"Reveal",propertyName:"reveal"},r={itemType:"action",tooltip:"Reset",propertyName:"reset"},s=(()=>{switch(t.votingState){case"InProgress":return[r,n];case"Revealed":return[r];default:return[]}})();return ut(s,({propertyName:i})=>{switch(i){case"reveal":t.votingState=="InProgress"&&e({votingState:"Revealed",votingOptions:t.votingOptions,storyName:t.storyName,storyDescription:t.storyDescription});break;case"reset":e(B),o.keys().forEach(c=>o.delete(c));break}}),figma.widget.h(d,{direction:"vertical",verticalAlignItems:"center",fill:"#FFFFFF",width:320,cornerRadius:8,effect:{type:"drop-shadow",color:{r:0,g:0,b:0,a:.2},offset:{x:0,y:2},blur:3,spread:2},padding:{vertical:16,horizontal:16}},(()=>{switch(t.votingState){case"NotStarted":return figma.widget.h(yt,{onClickStart:()=>{x({width:240,height:344},{name:"INIT_VOTING_DATA"}),y("SET_VOTING",(i,c,l)=>{t.votingState=="NotStarted"&&e({votingState:"InProgress",votingOptions:i,storyName:c,storyDescription:l}),figma.closePlugin()})}});case"InProgress":return figma.widget.h(xt,U(O({},t),{votedUserIds:o.values().map(i=>i.userId),onClickVote:()=>{var i;x({width:240,height:344},{name:"VOTING_DATA",votingOptions:t.votingOptions,storyDescription:t.storyDescription,storyName:t.storyName,votedFor:(i=o.get(figma.currentUser.sessionId.toString()))==null?void 0:i.votedFor}),y("SET_VOTE",c=>{if(t.votingState=="InProgress"){let l=figma.currentUser;o.set(l.sessionId.toString(),{userId:l.sessionId,userPhotoUrl:l.photoUrl,votedFor:c}),figma.notify(`${v(c)} it is. ${mt.random()}`)}figma.closePlugin()})}}));case"Revealed":return figma.widget.h(M,{votings:o.values(),votingOptions:t.votingOptions,storyName:t.storyName,storyDescription:t.storyDescription});default:return}})())}function yt({onClickStart:t}){return figma.widget.h(d,{direction:"vertical",horizontalAlignItems:"center",width:"fill-parent"},figma.widget.h(d,{direction:"horizontal",width:"hug-contents",verticalAlignItems:"center"},figma.widget.h(_,null),figma.widget.h(a,{size:4}),figma.widget.h(f,{fontSize:18,fontWeight:600,horizontalAlignText:"center",fill:"#000000"},"Scrum-A-Lot")),figma.widget.h(a,{size:4}),figma.widget.h(f,{fontSize:14,fontWeight:400,horizontalAlignText:"center",fill:"#667085"},"Start with creating a story and let your"),figma.widget.h(f,{fontSize:14,fontWeight:400,horizontalAlignText:"center",fill:"#667085"},"team estimate the effort."),figma.widget.h(a,{size:24}),figma.widget.h(w,{text:"Create Story",onClick:t}))}function xt({storyName:t,storyDescription:e,votedUserIds:o,onClickVote:n}){let r=[],s=figma.activeUsers.map(i=>{var c;return{photoUrl:(c=i.photoUrl)!=null?c:"",hasVoted:!!o.find(l=>l==i.sessionId)}});for(let i=0;i<s.length;i+=$)r.push(s.slice(i,i+$));return figma.widget.h(d,{direction:"vertical",width:"fill-parent"},figma.widget.h(f,{fontSize:14,fontWeight:500,fill:"#101828"},t),figma.widget.h(a,{size:4}),figma.widget.h(f,{fontSize:12,fontWeight:400,fill:"#101828"},e),figma.widget.h(a,{size:40}),figma.widget.h(d,{direction:"vertical",horizontalAlignItems:"start",width:"fill-parent",spacing:8},r.map((i,c)=>figma.widget.h(d,{key:`row_${c}`,direction:"horizontal",horizontalAlignItems:"start",spacing:8,width:"fill-parent"},i.map(l=>figma.widget.h(V,{key:`avatar_${l}`,photoUrl:l.photoUrl,opacity:l.hasVoted?1:.3}))))),figma.widget.h(a,{size:40}),figma.widget.h(f,{fontSize:12,fontWeight:400,fill:"#101828"},`${o.length} ${o.length==1?"Vote":"Votes"}`),figma.widget.h(a,{size:8}),figma.widget.h(w,{text:"Vote",onClick:n}))}var b,d,de,f,fe,me,he,ye,pt,gt,ut,dt,xe,ve,Se,mt,B,$,H=g(()=>{F();k();A();W();({widget:b}=figma),{AutoLayout:d,Frame:de,Text:f,Rectangle:fe,Image:me,SVG:he,Ellipse:ye,useSyncedState:pt,useSyncedMap:gt,usePropertyMenu:ut,useEffect:dt,useWidgetId:xe,register:ve,waitForTask:Se}=b;mt=["Great choice!","Dy-na-mite.","The only possible choice tbh.","Excellent choice, citizen.","\u{1F4AA}\u{1F525}","Sweet decision making, worker."],B={votingState:"NotStarted"};$=6});var vt={"src/main.tsx--default":(H(),tt(G)).default},St="src/main.tsx--default";vt[St]();})();
